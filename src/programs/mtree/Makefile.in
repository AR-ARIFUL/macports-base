#	$NetBSD: Makefile.in,v 1.8 2003/03/31 06:15:07 grant Exp $

PREFIX=		@prefix@
INSTALL=	@INSTALL@

mandir=		${PREFIX}/man
mandircat8=	${mandir}/cat8

all:	mtree

PROG=	mtree
MAN=
SRCS= compare.c crc.c create.c excludes.c misc.c mtree.c spec.c \
	verify.c getid.c stat_flags.c pack_dev.c vis.c unvis.c \
	../md5/md5hl.c ../md5/md5c.c ../md5/sha1.c \
	../md5/sha1hl.c ../md5/rmd160.c ../md5/rmd160hl.c \
	fgetln.c __fts13.c err.c setmode.c setprogname.c
OBJS= compare.o crc.o create.o excludes.o misc.o mtree.o spec.o \
	verify.o getid.o stat_flags.o pack_dev.o vis.o unvis.o \
	../md5/md5hl.o ../md5/md5c.o ../md5/sha1.o \
	../md5/sha1hl.o ../md5/rmd160.o ../md5/rmd160hl.o \
	fgetln.o __fts13.o err.o setmode.o setprogname.o

CPPFLAGS+=	-I../md5 -I.

CC=		@CC@
CCLD=		$(CC)
LIBS=		@LIBS@
CPPFLAGS=	@CPPFLAGS@
DEFS=		@DEFS@ -I. -I@srcdir@ -I../md5
CFLAGS=		@CFLAGS@
LDFLAGS=	@LDFLAGS@

LINK=		$(CCLD) $(CFLAGS) $(LDFLAGS) -o $@
COMPILE=	$(CC) $(DEFS) $(CPPFLAGS) $(CFLAGS)

all: ${PROG}

${PROG}: ${OBJS}
	${LINK} ${OBJS} ${LIBS}

.c.o:
	$(COMPILE) -c $< -o $@

clean:
	rm -f ${OBJS} ${PROG}

distclean: clean
	rm -f Makefile config.h config.status config.log

install:
	${INSTALL} ${PROG} ${PREFIX}/sbin
	${INSTALL} -m 755 -d ${mandircat8}
	${INSTALL} -m 444 ${PROG}.cat8 ${mandircat8}/${PROG}.0
